{% extends 'record/base.html' %}

{% block title %}Attendance Records{% endblock %}

{% block content %}
<h2>Attendance Records</h2>
<form method="GET" action="{% url 'record:generate_report' %}">
    <input type="date" name="start_date" required>
    <input type="date" name="end_date" required>
    <button type="submit">Generate Report</button>
</form>

<table class="table table-striped table-sm table-responsive">
    <thead class="table-light">
        <tr>
            <th>Name</th>          
            <th>Station</th>            
            <th>Time In</th>
            <th>Time Out</th>
            <th>Signature</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for record in records %}
        <tr>
            <td>{{ record.lname }} {{ record.fname }} {{ record.onames }}</td>          
            <td>{{ record.station.name }}</td>          
            <td>{{ record.time_in }}</td>
            <td>{{ record.time_out }}</td>
            <td><img src="{{ record.signature.url }}" alt="Signature" width="100"></td>
            <td>
                {% if not record.time_out %}
                <a href="{% url 'record:update_record' record.pk %}" class="btn btn-secondary btn-sm">Edit</a>
                <a href="{% url 'record:delete_record' record.pk %}" class="btn btn-danger btn-sm">Delete</a>
                <a href="{% url 'record:complete_record' record.pk %}" class="btn btn-success btn-sm">Done</a>                
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8" class="text-center">No records found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
